<!doctype html>
<html lang="en" ng-app="user">
  <head>
    <title>Title</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="wiph=device-wiph, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.6.6/angular.min.js"></script>
    <link rel="stylesheet" type="text/css" href="assets/style.css">
    <script type="text/javascript">
       angular
        .module( "user" , [] )
        .controller( 'TransactionController' , [
          '$scope', 
          function controller( $scope ) {

            $scope.listTransaction = [ {
              "stamp" : "4354654yr6ytry6",
              "title" : "Reg",
              "description" : "Reg",
              "firstname" : "Hong",
              "lastname" : "Hue",
              "user_refernce" : "q42353465trdg34",
              "email_address" : "tranthihonghue19it@gmail.com",
              "mobile_phone" : "436547548",
              "home_address" : "VietNam"
            },

            {
              "stamp" : "4354654yr6yt5876",
              "title" : "Reg1",
              "description" : "Reg1",
              "firstname" : "Hong1",
              "lastname" : "Hue1",
              "user_refernce" : "q42353465trdg34",
              "email_address" : "tranthihonghue19it@gmail.com",
              "mobile_phone" : "436547548",
              "home_address" : "VietNam"
            },

            {
              "stamp" : "4354654yr6yt76",
              "title" : "Reg2",
              "description" : "Reg2",
              "firstname" : "Hong2",
              "lastname" : "Hue2",
              "user_refernce" : "q42353465trdg34",
              "email_address" : "tranthihonghue19it@gmail.com",
              "mobile_phone" : "436547548",
              "home_address" : "VietNam"
            },

            {
              "stamp" : "435465765876",
              "title" : "Reg3",
              "description" : "Reg3",
              "firstname" : "Hong3",
              "lastname" : "Hue3",
              "user_refernce" : "q42353465trdg34",
              "email_address" : "tranthihonghue19it@gmail.com",
              "mobile_phone" : "436547548",
              "home_address" : "VietNam"
            } ];

            $scope.hasTransaction = function hasTransaction( ) {
              if( $scope.listTransaction.lengh == 0 ) {
                return false;
              }

              return true;
            }

            $scope.showInfo = function showInfo( x ) {
              $scope.listTransaction.forEach( function onEachItem( item ) {
                if(item.stamp != x.stamp ) {
                  item._viewMode = false;
                };
              } )

              x._viewMode =! x._viewMode;
            }
            
        } ] ) 
    </script>
  </head>
  <body ng-controller="TransactionController">
    <h1>Transaction</h1>
    <div class="container">
      <table class="table">
          <thead>
            <tr>
              <th><input type="checkbox" value="">Stamp</th>
              <th>Title</th>
              <th>Description</th>
              <th>Firstname</th>
              <th>Lastname</th>
            </tr>
          </thead>
          <tbody 
            ng-repeat=" x in listTransaction"
            ng-if="hasTransaction( )"
          >
            <tr 
              class="title" 
              ng-click="showInfo( x )"
            >
              <td scope="row" >
                <input type="checkbox" value="">
                {{x.stamp}}
              </td>
              <td>{{ x.title }}</td>
              <td>{{ x.description }}</td>
              <td>{{ x.firstname }}</td>
              <td>{{ x.lastname }}</td>
            </tr >
            <tr 
              style="" class="detail"
              ng-show="x._viewMode"
            >
              <td class="title-detail">
                <h4>Transaction Details</h4>
                <button type="button" class="btn btn-default">Sub Details</button>
              </td>
              <td class="detail-transaction">
                <div class="detail-panel">
                  <div class="header">
                    <p>Stamp:</p>
                    <p>Title:</p>
                    <p>Description:</p>
                    <p>User Refernce:</p>
                    <p>Firstname:</p>
                    <p>Lastname:</p>
                    <p>Email Address:</p>
                    <p>Mobile Number:</p>
                    <p>Home Address:</p>
                  </div>
                  <div class="content">
                    <p>{{ x.stamp }}</p>
                    <p>{{ x.title }}</p>
                    <p>{{ x.description }}</p>
                    <p>{{ x.user_refernce }}</p>
                    <p>{{ x.firstname }}</p>
                    <p>{{ x.lastname }}</p>
                    <p>{{ x.email_address }}</p>
                    <p>{{ x.mobile_phone }}</p>
                    <p>{{ x.home_address }}</p>

                  </div>
                </div>
              </td>
              <td class="title-detail">
                <h4></h4>
                <button type="button" class="btn btn-primary pull-right">Edit</button>
                <button 
                  type="button" 
                  class="btn btn-default pull-right"
                  ng-click="!showInfo( x )"
                >
                  Close
                </button>
              </td>
            </tr>
          </tbody>
        </table>
    </div>
    
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
  </body>
</html>